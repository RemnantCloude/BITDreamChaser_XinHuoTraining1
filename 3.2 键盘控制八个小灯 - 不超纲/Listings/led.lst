C51 COMPILER V9.54   LED                                                                   10/26/2018 21:19:09 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE LED
OBJECT MODULE PLACED IN .\Objects\led.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE led.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\led.l
                    -st) OBJECT(.\Objects\led.obj)

line level    source

   1          #include <reg52.h>
   2          #include <intrins.h>
   3          
   4          /* ¼ì²â¼üÅÌµãÁÁÁ÷Ë®µÆ
   5                  R1C1¡¢2¡¢3¡¢4==>LED1234
   6                  R2C1¡¢2¡¢3¡¢4==>LED5678
   7             
   8                  P1==>¼üÅÌ
   9                  P2==>Á÷Ë®µÆ
  10          */
  11          
  12          //functions
  13          void delayms(unsigned int);
  14          int keyScan();
  15          
  16          
  17          //VARIABLES     
  18          unsigned char led;
  19          unsigned char temp;
  20          int flag;
  21          void main()
  22          {                       
  23   1              led = 0xff;     
  24   1              while(1) 
  25   1              {
  26   2                      P2=led;                                                 //²Ù×÷P2£¬²Ù×÷Á÷Ë®µÆ
  27   2                      flag=0;                                                 //¼ÇÂ¼´ËÊ±ÊÇ·ñÓÐ¼ü°´ÏÂ  
  28   2                      P1=0x7f;                                                 //row1 ËÍµÍµçÆ½
  29   2                      temp=P1&0x0f;                                     //tempµÄ×÷ÓÃÊÇ±£´æP1ºóËÄÎ»µÄÖµ
  30   2                      if(temp!=0x0f)                                  //Èç¹ûtemp==0x0f ËµÃ÷ÕâÒ»ÐÐÃ»ÓÐ¼ü±»°´ÏÂ
  31   2                      {                  
  32   3                              delayms(10);                 //ÑÓÊ±È¥¶¶
  33   3                              temp=P1&0x0f;                            
  34   3                              if(temp!=0x0f)   //È·ÈÏÕâÒ»ÐÐÓÐ¼ü±»°´ÏÂ
  35   3                              {                               
  36   4                                      temp=P1;
  37   4                                      switch(temp)
  38   4                                      {
  39   5                                              case 0x77:          //¼ì²âµÚÒ»ÐÐËÄ¸ö¼üÊÇ·ñÓÐ°´¼ü±»°´ÏÂ
  40   5                                              led = 0xfe;
  41   5                                              flag = 1;
  42   5                                              break;
  43   5                                          case 0x7b:
  44   5                                              led = 0xfd;
  45   5                                              flag =1;
  46   5                                              break;
  47   5                                          case 0x7d:
  48   5                                              led = 0xfb;
  49   5                                              flag = 1;
  50   5                                              break;
  51   5                                              case 0x7e:
  52   5                                              led = 0xf7;
  53   5                                              flag = 1;
  54   5                                              break;
C51 COMPILER V9.54   LED                                                                   10/26/2018 21:19:09 PAGE 2   

  55   5                                      }
  56   4                                      while(temp!=0x0f){          //°´¼üËÉ¿ªÇ°Í£ÁôÔÚ´ËÑ­»·
  57   5                                              temp=P1;
  58   5                                              temp=temp&0x0f;
  59   5                                      }
  60   4                              }
  61   3                      }
  62   2                      
  63   2                      if(!flag)          //È·±£Ä¿Ç°Ã»ÓÐ¶ÁÈ¡µÚÒ»ÐÐµÄ°´¼üÖµ
  64   2                      {
  65   3                              P1 = 0xbf;   //row2 ËÍµÍµçÆ½
  66   3                              temp = P1&0x0f;                                   //tempµÄ×÷ÓÃÊÇ±£´æP1ºóËÄÎ»µÄÖµ
  67   3                              if(temp != 0x0f)                                        //Èç¹ûtemp==0x0f ËµÃ÷ÕâÒ»ÐÐÃ»ÓÐ¼ü±»°´ÏÂ
  68   3                              {                  
  69   4                                      delayms(10);                 //ÑÓÊ±È¥¶¶
  70   4                                      temp = P1&0x0f;                          
  71   4                                      if(temp != 0x0f)   //È·ÈÏÕâÒ»ÐÐÓÐ¼ü±»°´ÏÂ
  72   4                                      {                               
  73   5                                              temp = P1;
  74   5                                              switch(temp)
  75   5                                              {
  76   6                                              case 0xb7:          //row2
  77   6                                                      led = 0xef;
  78   6                                                      break;
  79   6                                              case 0xbb:
  80   6                                                      led = 0xdf;
  81   6                                                      break;
  82   6                                              case 0xbd:
  83   6                                                      led = 0xbf;
  84   6                                                      break;
  85   6                                              case 0xbe:
  86   6                                                      led = 0x7f;
  87   6                                                      break;
  88   6                                              }
  89   5                                              while(temp != 0x0f){          //°´¼üËÉ¿ªÇ°Í£ÁôÔÚ´ËÑ­»·
  90   6                                                      temp = P1;
  91   6                                                      temp = temp&0x0f;
  92   6                                              }
  93   5                                      }
  94   4                              }
  95   3                      }
  96   2                      
  97   2                      //´Ë´¦Ê¡ÂÔÉ¨ÃèµÚÈýÐÐ¡¢µÚËÄÐÐµÄÊµÏÖ·½·¨£¬×÷ÒµÎª²Î¿¼µÚÒ»ÐÐµÚ¶þÐÐµÄÉ¨ÃèÊµÏÖ£¬×ÔÐÐÍê³ÉµÚÈýÐÐµÚËÄÐÐµÄ¼ì²â(¼ì²
             -âµÚÈýÐÐ¿ÉÄÜ»á´¥·¢·äÃùÆ÷£©
  98   2                      //Ñ§ÓÐÓàÁ¦µÄÍ¬Ñ§Ë¼¿¼Ò»ÏÂÓÐÃ»ÓÐ¸ü¼ò±ãµÄÊµÏÖ·½Ê½
  99   2                      //ÒªÇóÊÇµÚÈýËÄÐÐµÄ°´¼üÄÜ¹»ÊµÏÖºÍµÚÒ»¶þÐÐ²»Í¬µÄ¹¦ÄÜ
 100   2                      
 101   2              }
 102   1                      
 103   1              
 104   1      }
 105          void delayms(unsigned int xms)
 106          {
 107   1              unsigned int i,j;
 108   1              for(i = 0;i < xms;i++)
 109   1              {
 110   2                      for(j = 0;j < 110;j++);
 111   2              }
 112   1      }
 113          
 114          

C51 COMPILER V9.54   LED                                                                   10/26/2018 21:19:09 PAGE 3   


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    225    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
